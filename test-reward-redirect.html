<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•å¥–åŠ±å‘æ”¾å’Œè·³è½¬</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: all 0.3s ease;
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .button.success {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
        }
        .info-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .demo-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            z-index: 10000;
            max-width: 350px;
            animation: slideInRight 0.5s ease-out;
            display: none;
        }
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª æµ‹è¯•å¥–åŠ±å‘æ”¾å’Œè·³è½¬åŠŸèƒ½</h1>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•å¥–åŠ±å‘æ”¾æˆåŠŸåçš„é€šçŸ¥æ˜¾ç¤ºå’Œé¡µé¢è·³è½¬åŠŸèƒ½</p>

        <div class="test-section">
            <h3>ğŸ¯ æ¨¡æ‹Ÿå¥–åŠ±å‘æ”¾æµç¨‹</h3>
            <p>ç‚¹å‡»æŒ‰é’®æ¨¡æ‹ŸæˆåŠŸçš„å¥–åŠ±å‘æ”¾ï¼ŒæŸ¥çœ‹é€šçŸ¥æ•ˆæœå’Œè·³è½¬åŠŸèƒ½</p>
            <button class="button success" onclick="simulateRewardSuccess()">æ¨¡æ‹Ÿå¥–åŠ±å‘æ”¾æˆåŠŸ</button>
            <div class="info-box">
                <strong>æµ‹è¯•æµç¨‹ï¼š</strong><br>
                1. æ˜¾ç¤ºå¥–åŠ±æˆåŠŸé€šçŸ¥ï¼ˆ3ç§’ï¼‰<br>
                2. è‡ªåŠ¨è·³è½¬åˆ°æˆåŠŸé¡µé¢<br>
                3. ä¼ é€’äº¤æ˜“è¯¦æƒ…å‚æ•°<br>
                4. åœ¨æˆåŠŸé¡µé¢æ˜¾ç¤ºå…·ä½“ä¿¡æ¯
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ”— ç›´æ¥è·³è½¬æµ‹è¯•</h3>
            <p>ç›´æ¥è·³è½¬åˆ°æˆåŠŸé¡µé¢ï¼ŒæŸ¥çœ‹å‚æ•°ä¼ é€’æ•ˆæœ</p>
            <button class="button" onclick="directRedirect()">ç›´æ¥è·³è½¬åˆ°æˆåŠŸé¡µé¢</button>
            <div class="info-box">
                <strong>ä¼ é€’çš„å‚æ•°ï¼š</strong><br>
                â€¢ äº¤æ˜“å“ˆå¸Œ: 0x1234567890abcdef...<br>
                â€¢ å§¿åŠ¿åç§°: warrior-pose<br>
                â€¢ åˆ†æ•°: 95
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ“± é€šçŸ¥æ ·å¼é¢„è§ˆ</h3>
            <p>é¢„è§ˆå¥–åŠ±æˆåŠŸé€šçŸ¥çš„æ ·å¼å’ŒåŠ¨ç”»æ•ˆæœ</p>
            <button class="button" onclick="showNotificationPreview()">æ˜¾ç¤ºé€šçŸ¥é¢„è§ˆ</button>
            <button class="button" onclick="hideNotificationPreview()">éšè—é€šçŸ¥</button>
        </div>

        <div class="test-section">
            <h3>ğŸ”§ é›†æˆæµ‹è¯•è¯´æ˜</h3>
            <div class="info-box">
                <strong>åœ¨å®é™…åº”ç”¨ä¸­çš„å·¥ä½œæµç¨‹ï¼š</strong><br><br>
                1. ç”¨æˆ·å®Œæˆå§¿åŠ¿è¯†åˆ«å’ŒéªŒè¯<br>
                2. è°ƒç”¨ recordVerifiedPose() å‡½æ•°<br>
                3. æ™ºèƒ½åˆçº¦æ‰§è¡Œï¼Œå‘æ”¾ 0.01 S å¥–åŠ±<br>
                4. äº¤æ˜“æˆåŠŸåè°ƒç”¨ showRewardSuccessAndRedirect()<br>
                5. æ˜¾ç¤º3ç§’æˆåŠŸé€šçŸ¥<br>
                6. è‡ªåŠ¨è·³è½¬åˆ° reward-confirmation.html<br>
                7. æˆåŠŸé¡µé¢æ˜¾ç¤ºäº¤æ˜“è¯¦æƒ…å’Œåº†ç¥åŠ¨ç”»<br><br>
                
                <strong>ä¿®æ”¹çš„æ–‡ä»¶ï¼š</strong><br>
                â€¢ js/smart-contract-integration.js - æ·»åŠ è·³è½¬é€»è¾‘<br>
                â€¢ reward-confirmation.html - æ”¯æŒå‚æ•°æ˜¾ç¤º
            </div>
        </div>
    </div>

    <!-- Demo notification -->
    <div id="demoNotification" class="demo-notification">
        <div style="display: flex; align-items: center; margin-bottom: 15px;">
            <div style="font-size: 24px; margin-right: 15px;">ğŸ‰</div>
            <div>
                <div style="font-weight: bold; font-size: 18px; margin-bottom: 5px;">å¥–åŠ±å‘æ”¾æˆåŠŸï¼</div>
                <div style="font-size: 14px; opacity: 0.9;">ä½ å·²è·å¾— 0.01 S ä»£å¸å¥–åŠ±</div>
            </div>
        </div>
        <div style="font-size: 12px; opacity: 0.8;">
            <div>â€¢ å§¿åŠ¿: warrior-pose</div>
            <div>â€¢ åˆ†æ•°: 95</div>
            <div>â€¢ äº¤æ˜“: 0x1234567890...</div>
            <div style="margin-top: 10px; color: #f1c40f;" id="countdownText">3ç§’åè·³è½¬åˆ°æˆåŠŸé¡µé¢...</div>
        </div>
    </div>

    <script>
        function simulateRewardSuccess() {
            // æ¨¡æ‹ŸçœŸå®çš„å¥–åŠ±å‘æ”¾æµç¨‹
            const mockTransactionHash = '0x1234567890abcdef1234567890abcdef12345678';
            const mockPoseData = {
                poseName: 'warrior-pose',
                score: 95,
                duration: 8000
            };

            // æ˜¾ç¤ºé€šçŸ¥
            showRewardNotification(mockTransactionHash, mockPoseData);

            // 3ç§’åè·³è½¬
            setTimeout(() => {
                const mockProofId = 'proof_' + Date.now();
                const successUrl = `reward-confirmation.html?tx=${mockTransactionHash}&pose=${encodeURIComponent(mockPoseData.poseName)}&score=${mockPoseData.score}&proofId=${mockProofId}`;
                window.location.href = successUrl;
            }, 3000);
        }

        function showRewardNotification(transactionHash, poseData) {
            const notification = document.getElementById('demoNotification');
            const countdownElement = document.getElementById('countdownText');
            
            // æ›´æ–°é€šçŸ¥å†…å®¹
            notification.querySelector('div:nth-child(2) div:nth-child(1)').textContent = `â€¢ å§¿åŠ¿: ${poseData.poseName}`;
            notification.querySelector('div:nth-child(2) div:nth-child(2)').textContent = `â€¢ åˆ†æ•°: ${poseData.score}`;
            notification.querySelector('div:nth-child(2) div:nth-child(3)').textContent = `â€¢ äº¤æ˜“: ${transactionHash.substring(0, 10)}...`;
            
            // æ˜¾ç¤ºé€šçŸ¥
            notification.style.display = 'block';
            
            // å€’è®¡æ—¶
            let countdown = 3;
            const countdownInterval = setInterval(() => {
                countdown--;
                countdownElement.textContent = `${countdown}ç§’åè·³è½¬åˆ°æˆåŠŸé¡µé¢...`;
                if (countdown <= 0) {
                    clearInterval(countdownInterval);
                    notification.style.display = 'none';
                }
            }, 1000);
        }

        function directRedirect() {
            const mockTransactionHash = '0x1234567890abcdef1234567890abcdef12345678';
            const mockProofId = 'proof_' + Date.now();
            const successUrl = `reward-confirmation.html?tx=${mockTransactionHash}&pose=${encodeURIComponent('warrior-pose')}&score=95&proofId=${mockProofId}`;
            window.location.href = successUrl;
        }

        function showNotificationPreview() {
            const notification = document.getElementById('demoNotification');
            notification.style.display = 'block';
        }

        function hideNotificationPreview() {
            const notification = document.getElementById('demoNotification');
            notification.style.display = 'none';
        }

        // æ·»åŠ ä¸€äº›æ ·å¼åŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
            .button:active {
                animation: pulse 0.3s ease;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
